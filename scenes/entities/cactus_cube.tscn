[gd_scene load_steps=12 format=3 uid="uid://c40fkbvpnj2qf"]

[ext_resource type="Script" path="res://scripts/entities/cactus_cube/cactus_cube.gd" id="1_ti5rl"]
[ext_resource type="Texture2D" uid="uid://dg6wt2752iol3" path="res://assets/art/entities/cactus_cube/Body.png" id="2_tnr36"]
[ext_resource type="Texture2D" uid="uid://pem1wfm2jrii" path="res://assets/art/entities/cactus_cube/NeutralFace.png" id="3_hkyn5"]
[ext_resource type="Texture2D" uid="uid://dl0g7d8lhmwow" path="res://assets/art/entities/cactus_cube/AngryFace.png" id="4_l05tj"]
[ext_resource type="PackedScene" uid="uid://cy6iv24ne4unh" path="res://scenes/entities/hitbox.tscn" id="5_d8tcj"]
[ext_resource type="Script" path="res://scripts/state_machine/state_machine.gd" id="6_xoon1"]
[ext_resource type="Script" path="res://scripts/entities/cactus_cube/idle_state.gd" id="7_ll2ei"]
[ext_resource type="Script" path="res://scripts/entities/cactus_cube/chase_state.gd" id="8_i16fl"]
[ext_resource type="Texture2D" uid="uid://dp7iics4dliaw" path="res://assets/art/entities/cactus_cube/Spike.png" id="9_4pqh4"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_x6gra"]
size = Vector2(83, 81)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qc4pw"]
size = Vector2(80, 81)

[node name="CactusCube" type="CharacterBody2D"]
script = ExtResource("1_ti5rl")

[node name="Body" type="Sprite2D" parent="."]
scale = Vector2(0.25, 0.25)
texture = ExtResource("2_tnr36")

[node name="Spike" type="Sprite2D" parent="Body"]
position = Vector2(184, -4)
texture = ExtResource("9_4pqh4")

[node name="Spike2" type="Sprite2D" parent="Body"]
position = Vector2(-184, -4)
rotation = 3.14159
texture = ExtResource("9_4pqh4")

[node name="Spike3" type="Sprite2D" parent="Body"]
position = Vector2(0, 176)
rotation = 1.5708
texture = ExtResource("9_4pqh4")

[node name="Spike4" type="Sprite2D" parent="Body"]
position = Vector2(0, -184)
rotation = 4.71239
texture = ExtResource("9_4pqh4")

[node name="AngryFace" type="Sprite2D" parent="Body"]
visible = false
texture = ExtResource("4_l05tj")

[node name="NeutralFace" type="Sprite2D" parent="Body"]
texture = ExtResource("3_hkyn5")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-0.5, -1.5)
shape = SubResource("RectangleShape2D_x6gra")
disabled = true

[node name="Hitbox" parent="." instance=ExtResource("5_d8tcj")]
collision_layer = 3
BASE_SIZE = 0.25
SIZE_SCALE_FACTOR = 0.2
SIZE_TWEEN_RATE = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hitbox"]
position = Vector2(0, -1.5)
shape = SubResource("RectangleShape2D_qc4pw")

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("current_state")]
script = ExtResource("6_xoon1")
current_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("7_ll2ei")

[node name="Chase" type="Node" parent="StateMachine"]
script = ExtResource("8_i16fl")

[connection signal="damage_recieved" from="Hitbox" to="." method="_on_hitbox_damage_recieved"]
